{% extends 'base.html.twig' %}

{% block title %}Login - FootballDB{% endblock %}

{% block body %}
<div class="auth-container" style="max-width: 450px; margin: 0 auto; padding: 2rem 0;">
    <div class="card">
        <div class="auth-header text-center mb-3">
            <div style="width: 80px; height: 80px; background: var(--primary); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 1rem;">
                <i class="fas fa-lock" style="font-size: 2rem; color: white;"></i>
            </div>
            <h1>Welcome Back</h1>
            <p class="text-muted">Sign in to your FootballDB account</p>
        </div>
        
        <form method="post">
            {% if error %}
                <div class="alert-message" style="background: #fee2e2; color: #dc2626; padding: 1rem; border-radius: var(--radius); margin-bottom: 1.5rem; border-left: 4px solid #dc2626;">
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <i class="fas fa-exclamation-circle"></i>
                        <span>{{ error.messageKey|trans(error.messageData, 'security') }}</span>
                    </div>
                </div>
            {% endif %}
            
            {% if app.user %}
                <div class="alert-message" style="background: #d1fae5; color: #065f46; padding: 1rem; border-radius: var(--radius); margin-bottom: 1.5rem; border-left: 4px solid #10b981;">
                    <div style="display: flex; align-items: center; justify-content: space-between;">
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <i class="fas fa-check-circle"></i>
                            <span>You are logged in as <strong>{{ app.user.userIdentifier }}</strong></span>
                        </div>
                        <a href="{{ logout_path() }}" style="color: inherit;">
                            <i class="fas fa-sign-out-alt"></i>
                        </a>
                    </div>
                </div>
            {% endif %}
            
            <div class="form-group mb-3">
                <label for="inputEmail" style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: var(--dark);">
                    <i class="fas fa-envelope"></i> Email Address
                </label>
                <input type="email" value="{{ last_username }}" name="email" id="inputEmail" 
                       style="width: 100%; padding: 1rem; border: 2px solid var(--gray-light); border-radius: var(--radius); font-size: 1rem; transition: var(--transition);"
                       placeholder="you@example.com" required autofocus>
            </div>
            
            <div class="form-group mb-3">
                <label for="inputPassword" style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: var(--dark);">
                    <i class="fas fa-key"></i> Password
                </label>
                <input type="password" name="password" id="inputPassword" 
                       style="width: 100%; padding: 1rem; border: 2px solid var(--gray-light); border-radius: var(--radius); font-size: 1rem;"
                       placeholder="••••••••" required>
            </div>
            
            <input type="hidden" name="_csrf_token" value="{{ csrf_token('authenticate') }}">
            
            <div class="form-options" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                    <input type="checkbox" name="_remember_me" style="width: 18px; height: 18px;">
                    <span>Remember me</span>
                </label>
                
                <a href="#" style="color: var(--primary); text-decoration: none; font-size: 0.9rem;">
                    Forgot password?
                </a>
            </div>
            
            <button class="btn btn-primary" type="submit" 
                    style="width: 100%; padding: 1rem; font-size: 1.1rem; display: flex; align-items: center; justify-content: center; gap: 10px;">
                <i class="fas fa-sign-in-alt"></i> Sign In
            </button>
        </form>
        
        <div class="auth-footer text-center mt-3">
            <p class="text-muted">Don't have an account? 
                <a href="{{ path('app_register') }}" style="color: var(--primary); font-weight: 600; text-decoration: none;">
                    Create one now
                </a>
            </p>
        </div>
    </div>
</div>

<style>
    .form-group input:focus {
        outline: none;
        border-color: var(--primary) !important;
        box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
    }
    
    .auth-container .card {
        padding: 2.5rem;
    }
</style>
{% endblock %}